<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link th:rel="stylesheet" th:href="@{/webjars/bootstrap/5.1.3/css/bootstrap.min.css}">
    <title>Categorie</title>
</head>

<body>
    <nav th:replace="~{fragments/navbar :: navbar('categories')}"></nav>

    <div class="container mt-4">
        <h3>Categorie</h3>
        <hr>

        <form th:object="${categoryObj}" th:action="@{/categories/create}" method="post" class="d-flex gap-2 mb-3">
            <input th:field="*{category}" class="form-control form-control-sm" th:errorClass="is-invalid" placeholder="Nome categoria" required>
            <div th:if="${#fields.hasErrors('category')}" class="invalid-feedback">
                <ul>
                    <li th:each="err : ${#fields.errors('category')}" th:text="${err}"></li>
                </ul>
            </div>
            <button class="btn btn-success btn-sm" type="submit">Aggiungi</button>
        </form>

        <ul class="list-group list-group-flush" th:if="${list.size() > 0}">
            <li class="list-group-item d-flex justify-content-between align-items-center py-2" th:each="item : ${list}">
                <span th:text="${item.category}"></span>
                <form th:action="@{|/categories/delete/${item.id}|}" method="post" class="m-0">
                    <button class="btn btn-danger btn-sm" type="submit"
                        onclick="return confirm('Vuoi davvero eliminare questa categoria?')">
                        ðŸ—‘
                    </button>
                </form>
            </li>
        </ul>

        <div class="alert alert-primary py-2" role="alert" th:unless="${list.size() > 0}">
            Nessuna categoria presente
        </div>
    </div>

    <script th:src="@{/webjars/bootstrap/5.1.3/js/bootstrap.bundle.min.js}"></script>
</body>

</html>